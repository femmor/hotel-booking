let express,readdirSync,dotenv,cors,mongoose;_89a‍.w("express",[["default",["express"],function(v){express=v}]]);_89a‍.w("fs",[["readdirSync",["readdirSync"],function(v){readdirSync=v}]]);_89a‍.w("dotenv",[["default",["dotenv"],function(v){dotenv=v}]]);_89a‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_89a‍.w("mongoose",[["default",["mongoose"],function(v){mongoose=v}]]);





const morgan = require("morgan");

dotenv.config();

const app = express();

// Database connection
connect(process.env.DATABASE_URL, {
  dbName: process.env.DB_NAME,
  user: process.env.DB_USER,
  pass: process.env.DB_PASS,
  useNewUrlParser: true,
  useUnifiedTopology: true,
  useFindAndModify: false,
  useCreateIndex: true,
})
  .then(() => {
    console.log("Connection established with MongoDB");
  })
  .catch(error => _89a‍.g.console.error(error.message));

// middlewares
app.use(cors());
app.use(morgan("dev"));

// route middleware
readdirSync("./routes").map(r => app.use("/api", require(`./routes/${r}`)));

const port = process.env.PORT || 3005;

app.listen(port, () => {
  console.log(`Server started on port ${port}`);
});
